- content_for :head do
  = sass_link_tag 'entries'
  = stylesheet_link_tag 'IB_manager'
- content_for :foot do
  = javascript_include_tag 'autoresize.jquery.min', 'geo', 'userfileuploader', 'dreams'
  = javascript_include_tag 'http://maps.google.com/maps/api/js?sensor=false'
  = coffeescript_include_tag 'tag', 'newentry', 'sharing'

/ CONTEXT BAR
= render :partial => "users/context_panel", :locals => {:user => current_user}

/ ENTRY
#entryField

  = form_for @entry do |f|
    / HIDDEN FORM ELEMENTS
    
    = fields_for (@entry.view_preference||current_user.view_preference) do |v|
      = v.hidden_field 'image_id' # Bedsheet
      = v.hidden_field 'theme'    # Currently 'light' or 'dark'

    - @entry.images.each do |image|
      = hidden_field_tag 'entry[image_ids][]', image.id, :class => 'image_upload'
    
    / NEW ENTRY INPUT PANEL
    #newEntry

      = hidden_field_tag 'links[][url]', 'http://www.google.com'
      = hidden_field_tag 'links[][title]', 'Goooooogle'
      = hidden_field_tag 'links[][url]', 'http://www.froogle.com'
      = hidden_field_tag 'links[][title]', 'Froooooogle'

      .wrapper
        / 
          MOOD ICON
          = render :partial => "mood_icon"

      .entryType
        %img{src: '/images/icons/dream-32.png'}
        %span#entryType_current{value: 'Dream'}
        %select#entryType_list{name: 'entry[type]'}
          %option{value: 'Dream'} Dream
          %option{value: 'Vision'} Vision
          %option{value: 'Experience'} Experience


      = f.text_field :title, :maxlength => '72'
      %hr
      = f.text_area :body
      
      #entryOptions
        /
          Save for later  
          .myBooks
            %img{src: '/images/icons/books-16.png'} My Lucid Dreams

        = f.submit :value => 'post'


        // SHARING PANEL
        .sharingWrap
          .sharing
            %img.listSelection{src: '/images/icons/share-16.png'}
            %select#entry_sharing_level{name: "entry[sharing_level]"}
              %option.everyone{value: '500'} everyone
              %option.list{} list of users
              %option.anon{value: '50'} anonymous
              %option.private{value: '0'} private

            .listOfUsers.target.hidden
              .friendsOnly
                %label
                  %input{value:'200', type: 'radio', name: 'listOfUsers'}
                  %span friends only
              .followersOnly
                %label
                  %input{value:'150', type: 'radio', name: 'listOfUsers'}
                  %span followers only

            .everyone.target.hidden
              .facebook
                %label
                  %img{src: '/images/icons/facebook-16.png', width: '16', height: '16'}
                  %span.shareOn share on
                  %span facebook
                  %input{type: 'checkbox', name: 'facebook'}
              .twitter.hidden
                %label
                  %img{src: '/images/icons/twitter-16.png', width: '16', height: '16'}
                  %span.shareOn share on
                  %span twitter
                  %input{type: 'checkbox', name: 'twitter'}
              .buzz.hidden
                %label
                  %img{src: '/images/icons/buzz-16.png', width: '16', height: '15'}
                  %span buzz
                  %span.shared shared:
                  %span.sharedWhen 10 hours ago
              .clear

        .addLocation
          %img{src: '/images/icons/location-21.png'}
          = render partial: "shared/hover_label", locals: {message: "add your location", x: "21", y: "38"}
        .date
          %img{src: '/images/icons/date-19.png'}
          = render partial: "shared/hover_label", locals: {message: "date and time", x: "21", y: "38"}
        .addTheme
          %img{src: '/images/icons/appearance-32.png', onclick: "$.publish('toggleAppearance', [this])"}
          = render partial: "shared/hover_label", locals: {message: "appearance", x: "21", y: "38"}


    / NEW ENTRY DATE TIME
    = render :partial => "date_time"

    / NEW ENTRY LOCATION
    = render :partial => "location"

    / NEW ENTRY IMAGES
    = render :partial => "image_panel", locals: {images: @entry.images}

    / NEW ENTRY TAG
    .entryTags.entryAssets.hidden
      .tagHeader.headers
        tag
        %img{src: '/images/icons/tag-20.png'}
      .tagInputWrap
        %img{src: '/images/slices/inputLeftLight-40.png', width: '26', height: '40'}
        .tagInput
          %input#newTag
          .tagAdd
            %span +
            add
        %img{src: '/images/slices/inputRightLight-40.png', width: '14', height: '40'}

      #tag-list.tag-list.ui-sortable
        #empty-tag.tag.tag_box.tag_what.hidden
          %span.tagContent
        - @entry.whats.each do |what|
          .tag_box.tag_what.tag
            %span.tagContent= what.name
          
        %br{style: 'clear: both;'}
      #sorting.clear

    / NEW ENTRY LINK
    .entryLinks.entryAssets.hidden
      .linksHeader.headers
        links
        %img{src: '/images/icons/links-19.png'}
      #linkInputWrap
        %input#linkValue
        .linkAdd
          %span +
          Add
      #linkHolder
      .clear

    / NEW ENTRY MOOD
    .entryMood.entryAssets.hidden
      .moodHeader.headers
        mood
        %img{src: '/images/icons/mood-19.png'}

      / MOOD PICKER
      .moodPicker
        .love
          %label.one
            %span Love
            = radio_button_tag 'love', 1
          %label.two
            = radio_button_tag 'love', 2
          %label.three
            = radio_button_tag 'love', 3
          %label.four
            = radio_button_tag 'love', 4
          %label.five
            = radio_button_tag 'love', 5
        .joy
          %label.one
            %span Joy
            = radio_button_tag 'joy', 1
          %label.two
            = radio_button_tag 'joy', 2
          %label.three
            = radio_button_tag 'joy', 3
          %label.four
            = radio_button_tag 'joy', 4
          %label.five
            = radio_button_tag 'joy', 5
        .surprise
          %label.one
            %span Surprise
            = radio_button_tag 'surprise', 1
          %label.two
            = radio_button_tag 'surprise', 2
          %label.three
            = radio_button_tag 'surprise', 3
          %label.four
            = radio_button_tag 'surprise', 4
          %label.five
            = radio_button_tag 'surprise', 5
        .anger
          %label.one
            %span Anger
            = radio_button_tag 'anger', 1
          %label.two
            = radio_button_tag 'anger', 2
          %label.three
            = radio_button_tag 'anger', 3
          %label.four
            = radio_button_tag 'anger', 4
          %label.five
            = radio_button_tag 'anger', 5
        .mystical
          %label.one
            %span Mystical
            = radio_button_tag 'mystical', 1
          %label.two
            = radio_button_tag 'mystical', 2
          %label.three
            = radio_button_tag 'mystical', 3
          %label.four
            = radio_button_tag 'mystical', 4
          %label.five
            = radio_button_tag 'mystical', 5
        .wonder
          %label.one
            %span Wonder
            = radio_button_tag 'wonder', 1
          %label.two
            = radio_button_tag 'wonder', 2
          %label.three
            = radio_button_tag 'wonder', 3
          %label.four
            = radio_button_tag 'wonder', 4
          %label.five
            = radio_button_tag 'wonder', 5
        .sadness
          %label.one
            %span Sadness
            = radio_button_tag 'sadness', 1
          %label.two
            = radio_button_tag 'sadness', 2
          %label.three
            = radio_button_tag 'sadness', 3
          %label.four
            = radio_button_tag 'sadness', 4
          %label.five
            = radio_button_tag 'sadness', 5
        .stress
          %label.one
            %span Stress
            = radio_button_tag 'stress', 1
          %label.two
            = radio_button_tag 'stress', 2
          %label.three
            = radio_button_tag 'stress', 3
          %label.four
            = radio_button_tag 'stress', 4
          %label.five
            = radio_button_tag 'stress', 5
        .fear
          %label.one
            %span Fear
            = radio_button_tag 'fear', 1
          %label.two
            = radio_button_tag 'fear', 2
          %label.three
            = radio_button_tag 'fear', 3
          %label.four
            = radio_button_tag 'fear', 4
          %label.five
            = radio_button_tag 'fear', 5
        .clear


    / NEW ENTRY ATTACHMENTS
    .entryAttach.entryAssets
      %p attach:
      .images
        %img{src: '/images/icons/eye-images-16.png', width: '19', height: '13'}
        images
      .tag
        %img{src: '/images/icons/tag-20.png', width: '20', height: '20'}
        tag
      .links
        %img{src: '/images/icons/links-19.png', width: '19', height: '19'}
        links
      .mood
        %img{src: '/images/icons/mood-19.png', width: '19', height: '19'}
        mood
      .clear

